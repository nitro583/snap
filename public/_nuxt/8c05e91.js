(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{293:function(t,e,o){var content=o(296);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(72).default)("8a4438c0",content,!0,{sourceMap:!1})},294:function(t,e,o){"use strict";o.r(e);o(115);var r={show:"ImageInput",props:{show:{type:Boolean,default:!1}},watch:{show:function(t){this.imgShow=t}},computed:{image:{set:function(t){this.$emit("input",t)},get:function(){return this.value}}},data:function(){return{isDragOver:!1,thumbnail:"",error:"",imgShow:this.show}},methods:{onDrag:function(t){this.isDragOver="over"===t},onDrop:function(t){this.isDragOver=!1;var e=t.dataTransfer.files;1===e.length&&0===e[0].type.indexOf("image")&&this.readImage(e[0])},onChange:function(t){var e=t.target.files;1===e.length&&0===e[0].type.indexOf("image")&&this.readImage(e[0])},readImage:function(t){if(console.log(t.size),t.size/1e6>5&&(console.log(t.size),this.error="ファイルサイズが大きすぎます（"+Math.round(t.size/1e6)+"MB /5MB）",alert(this.error),this.error="",t=null),t){var e=new FileReader;e.onload=this.loadImage,e.readAsDataURL(t)}},loadImage:function(t){var image=new Image;image.src=t.target.result,this.image=image,this.thumbnail=image.src,this.imgShow=!0,this.$emit("loadImage")}}},n=(o(295),o(47)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"image-input"},[o("div",{staticClass:"image-input__field",class:{over:t.isDragOver},on:{dragover:function(e){return e.preventDefault(),t.onDrag("over")},dragleave:function(e){return t.onDrag("leave")},drop:function(e){return e.stopPropagation(),t.onDrop(e)}}},[this.imgShow?o("img",{attrs:{src:this.thumbnail}}):t._e(),t._v(" "),this.imgShow?t._e():o("p",{staticClass:"image-input__icon"},[o("fa",{attrs:{icon:["fas","camera"]}})],1),t._v(" "),o("input",{attrs:{type:"file",title:""},on:{change:t.onChange}})])])}),[],!1,null,null,null);e.default=component.exports},295:function(t,e,o){"use strict";o(293)},296:function(t,e,o){(e=o(71)(!1)).push([t.i,".image-input{width:100%;height:100%}.image-input__field{width:100%;height:100%;position:relative;display:flex;justify-content:center;align-items:center}.image-input__field.over{background-color:#666}.image-input__field>input{position:absolute;width:100%;height:100%;top:0;left:0;opacity:0;cursor:pointer}.image-input__field>p{color:#aaa;text-align:center}.image-input__icon{font-size:24px}",""]),t.exports=e},301:function(t,e,o){"use strict";o.r(e);o(36),o(52);var r=o(10),n={fetch:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.store,r=t.params,console.log("params.id"+r.id),e.next=4,o.dispatch("login/getUser",r.id);case 4:console.log("getUserしました");case 5:case"end":return e.stop()}}),e)})))()},head:function(){return{bodyAttrs:{class:this.scrollLock}}},computed:{postUser:function(){return this.$store.getters["login/postUser"]},user:function(){return this.$store.getters["login/user"]},userName:{get:function(){return this.$store.getters["login/postUser"][0].name},set:function(t){this.$store.commit("login/updateUserName",t)}},introduction:{get:function(){return this.$store.getters["login/postUser"][0].introduction},set:function(t){this.$store.commit("login/updateIntroduction",t)}}},created:function(){this.$store.dispatch("login/checkLogin")},components:{ImageInput:o(294).default},data:function(){return{email:"",password:"",updateName:"",thumbnail:"",uid:this.$route.params.id,show:!0,imgShow:!1,showModal:!1,scrollLock:"",error:"",image:{}}},methods:{updateProfile:function(){console.log("updateProfile"),this.errors=[],this.user.name||this.errors.push("Nameが未記入です。"),this.errors.length||(this.$store.dispatch("login/updateProfile",{uid:this.user.uid,name:this.userName,introduction:this.introduction}),this.submitImg(),this.closeModal())},checkString:function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)},openModal:function(){this.showModal=!0,this.scrollLock="lock"},closeModal:function(){this.showModal=!1,this.scrollLock="",this.$store.dispatch("login/getUser",this.user.uid)},getImg:function(){this.$store.dispatch("getImg",this.thumbnail)},updateImg:function(t){this.$store.dispatch("login/updateImg",this.thumbnail)},submitImg:function(){this.thumbnail=this.image.src,console.log("aaaaaaaaaaa"+this.thumbnail),this.thumbnail&&(this.$store.dispatch("login/submitImg",{img:this.thumbnail,uid:this.user.uid}),this.thumbnail="",this.imgShow=!0,this.show=!1,this.$nextTick((function(){this.show=!0,this.imgShow=!1})))}}},l=o(47),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[t.postUser[0]?r("div",{staticClass:"p-id__profile"},[r("div",{staticClass:"p-id__profile__title"},[r("h2",{staticClass:"p-id__profile__name"},[t._v(t._s(t.postUser[0].name))]),t._v(" "),t.postUser[0].uid===t.user.uid?r("button",{staticClass:"c-button",on:{click:t.openModal}},[t._v("\n        プロフィールを編集する\n      ")]):t._e()]),t._v(" "),r("div",{staticClass:"p-id__profile__left"},[r("div",{staticClass:"p-id__profile__image"},[t.postUser[0].photoURL?r("img",{attrs:{src:t.postUser[0].photoURL,alt:t.postUser[0].uid}}):r("img",{attrs:{src:o(145),alt:t.postUser[0].uid}})])]),t._v(" "),r("div",{staticClass:"p-id__profile__right"},[r("div",{staticClass:"p-id__profile__introduction"},[r("p",[t._v(t._s(t.postUser[0].introduction))])])])]):t._e(),t._v(" "),r("transition",{attrs:{name:"modal"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"p-id__profile__modal",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal(e)}}},[r("div",{staticClass:"p-id__profile__edit"},[r("div",{staticClass:"p-id__profile__closeButton",on:{click:t.closeModal}}),t._v(" "),r("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.invalid;e.passes;return[r("h3",{staticClass:"p-id__profile__edit__h3"},[t._v("プロフィールを編集")]),t._v(" "),r("div",{staticClass:"p-id__profile__edit__image"},[r("image-input",{attrs:{show:t.imgShow},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1),t._v(" "),r("form",{on:{submit:function(t){t.preventDefault()}}},[r("div",{staticClass:"p-id__profile__edit__label-area"},[r("label",{staticClass:"p-id__profile__edit__label",attrs:{for:"name"}},[t._v("User Name\n              ")])]),t._v(" "),r("div",{staticClass:"p-id__profile__edit__input-area"},[r("validation-provider",{attrs:{rules:"required|max:15",name:"User Name"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],staticClass:"c-input p-id__profile__edit__input",attrs:{id:"name",type:"text",required:""},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:o.length,expression:"errors.length"}],staticClass:"p-id__profile__edit__error"},[t._v("\n                  "+t._s(o[0])+"\n                ")])]}}],null,!0)}),t._v(" "),r("div",{staticClass:"p-id__profile__edit__label-area"},[r("label",{staticClass:"p-id__profile__edit__label",attrs:{for:"introduction"}},[t._v("introduction\n                ")])])],1),t._v(" "),r("div",{staticClass:"p-id__profile__edit__input-area"},[r("validation-provider",{attrs:{rules:"max:140",name:"Introduction"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.introduction,expression:"introduction"}],staticClass:"c-input p-id__profile__edit__text-area",attrs:{rows:"5",id:"introduction",type:"text"},domProps:{value:t.introduction},on:{input:function(e){e.target.composing||(t.introduction=e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:o.length,expression:"errors.length"}],staticClass:"p-id__profile__edit__error"},[t._v("\n                  "+t._s(o[0])+"\n                ")])]}}],null,!0)})],1),t._v(" "),r("div",{staticClass:"p-id__profile__edit__button-area"},[r("button",{staticClass:"c-button p-id__profile__edit__button",attrs:{type:"submit",disabled:o},on:{click:t.updateProfile}},[t._v("\n                変更する\n              ")])])])]}}])})],1)])])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ImageInput:o(294).default})}}]);